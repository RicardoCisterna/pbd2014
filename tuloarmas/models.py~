# -*- encoding: utf-8 -*-

from django.db import models
from django.contrib.auth.models import User
from django.core.urlresolvers import reverse

#class Producto(models.Model):
#    id = models.AutoField('ID', primary_key=True)
#    nombre = models.CharField(max_length=255)
#    descripcion = models.TextField()
#    precio = models.IntegerField()
<<<<<<< HEAD
=======
<<<<<<< HEAD
=======
<<<<<<< HEAD

>>>>>>> 07c89df9e928c447741f1200188af459e583690d
>>>>>>> 39a646f3beef5c149537960c5704d65221be015a
#    def __unicode__(self):
#        return u'%s' % (self.nombre)

#class Comentario(models.Model):
#    id = models.AutoField('ID', primary_key=True)
#    creado = models.DateTimeField(auto_now_add=True)
#    texto = models.TextField()

    # Llaves foráneas
#    Usuario = models.ForeignKey(Usuario)
#    producto = models.ForeignKey(Producto)
    
#    def __unicode__(self):
#        return u'%s' % (self.nombre)
class Auditoria(models.Model):
    id = models.AutoField('ID', primary_key=True) 
    time_stamp = models.DateTimeField(auto_now_add=True)
    tabla = models.CharField(max_length=255)
    filas = models.CharField(max_length=255)
    usuario_accion= models.CharField(max_length=255)
    valor_anterior = models.TextField()
    nuevo_valor = models.TextField()
    operacion = models.CharField(max_length=255)

class Usuario (models.Model):
    id = models.AutoField('ID', primary_key=True) 
    tipo_usuario = models.CharField(max_length=20)
    nombre_usuario= models.CharField(max_length=100)
    apellido_usuario = models.CharField(max_length=100)
    correo_usuario =  models.EmailField()
    direccion_usuario = models.CharField(max_length=50)
    telefono = models.CharField(max_length=20)
    celular_usuario = models.CharField(max_length=20)
    rut_usuario = models.CharField(max_length=20)
    estado_usuario= models.CharField(max_length=20)
    fecha_ingreso = models.DateField()

class Producto(models.Model):
    id = models.AutoField('ID', primary_key=True)
    nombre = models.CharField(max_length=255)
    descripcion = models.TextField()
    precio = models.IntegerField()

#    def __unicode__(self):
#        return u'%s' % (self.nombre)

class Categoria(models.Model): 
    id = models.AutoField('ID', primary_key=True)
    nombre_categoria=models.CharField(max_length=255)
    #llaves foraneas
    raiz = models.ForeignKey('Categoria',null=True,blank=True)
<<<<<<< HEAD

#class Comentario(models.Model):
#    id = models.AutoField('ID', primary_key=True)
#    creado = models.DateTimeField(auto_now_add=True)
#    texto = models.TextField()

=======

#class Comentario(models.Model):
#    id = models.AutoField('ID', primary_key=True)
#    creado = models.DateTimeField(auto_now_add=True)
#    texto = models.TextField()

>>>>>>> 07c89df9e928c447741f1200188af459e583690d
    # Llaves foráneas
#    Usuario = models.ForeignKey(Usuario)
#    producto = models.ForeignKey(Producto)
    
#    def __unicode__(self):
#        return u'%s' % (self.nombre)
class Material(models.Model):
    id = models.AutoField('ID', primary_key=True) 
    nombre_material= models.CharField(max_length=255)
    descripcion_material = models.TextField()
    tipo_material = models.CharField(max_length=1)
    marca=  models.CharField(max_length=255)
    modelo= models.CharField(max_length=255)
    imagen_material =  models.CharField(max_length=255)
    #llaves foreaneas
    categoria = models.ForeignKey(Categoria,on_delete=models.PROTECT)

class Cotizacion(models.Model):
    id = models.AutoField('ID', primary_key=True) 
    fecha_cotizacion=models.DateField(auto_now_add=True)    
    #llaves foraneas    
    usuario = models.ForeignKey(Usuario,on_delete=models.PROTECT)
    
class Proveedor_material (models.Model):
    id  = models.AutoField('ID', primary_key=True) 
    precio_material = models.IntegerField()
    visibilidad = models.CharField(max_length=255)
    codigo_proveedor_material = models.CharField(max_length=255)
    #llaves foraneas
    Usuario = models.ForeignKey(Usuario, on_delete=models.PROTECT)
    material = models.ForeignKey(Material, on_delete=models.PROTECT)

class Envio (models.Model):
    id = models.AutoField('ID', primary_key=True) 
    #llaves foraneas
    Usuario = models.ForeignKey(Usuario ,on_delete=models.PROTECT)
    cotizacion = models.ForeignKey(Cotizacion ,on_delete=models.PROTECT)
    material= models.ForeignKey(Material ,on_delete=models.PROTECT)

class Detalle_cotizacion (models.Model):
    cantidad_material =  models.IntegerField()
    #llaves foraneas
    cotizacion = models.ForeignKey(Cotizacion, unique=True ,on_delete=models.PROTECT)
    material = models.ForeignKey(Material, unique=True ,on_delete=models.PROTECT)
    
class Caracteristicas(models.Model):
    id = models.AutoField('ID', primary_key=True)
    nombre_caracterisitica= models.CharField(max_length=255)
    descripcion_caracterisiticas = models.TextField() 
     
class Caracteristicas_material(models.Model):
    id = models.AutoField('ID', primary_key=True)
    #llave foraneas
    caracterisiticas = models.ForeignKey(Caracteristicas, unique=True ,on_delete=models.PROTECT)
    material = models.ForeignKey(Material, unique=True ,on_delete=models.PROTECT)
      
class Tutorial(models.Model):
    id =models.AutoField('ID', primary_key=True)
    video = models.URLField()
    nombre_tutorial = models.CharField(max_length=255)
    descripcion_tutorial =  models.TextField()
    imagen_tutorial = models.CharField(max_length=255)
    #llaves foraneas
    Usuario = models.ForeignKey(Usuario ,on_delete=models.PROTECT)
    categoria = models.ForeignKey(Categoria ,on_delete=models.PROTECT)

class Comentario (models.Model):
    cuerpo= models.TextField()
    #llaves foraneas
    Usuario = models.ForeignKey(Usuario, unique=True ,on_delete=models.PROTECT)
    tutorial = models.ForeignKey(Tutorial, unique=True ,on_delete=models.PROTECT)

class Notificacion (models.Model):
    id =models.AutoField('ID', primary_key=True)
    tipo_notificacion = models.CharField(max_length=255)
    usaurio_cambio=models.CharField(max_length=255)
    fecha_accion = models.DateField()
    #llaves foraneas
    Usuario = models.ForeignKey(Usuario ,on_delete=models.PROTECT)

class Proceso(models.Model):
    id =models.AutoField('ID', primary_key=True)
    nombre_proceso= models.CharField(max_length=255)
    descripcion_proceso = models.TextField()
    hh = models.IntegerField()
    #llaves foraneas
    tutorial = models.ForeignKey(Tutorial,on_delete=models.PROTECT )
    material = models.ForeignKey(Material ,on_delete=models.PROTECT)

class Consumo (models.Model):
    id =models.AutoField('ID', primary_key=True)
    cantidad_consumo = models.IntegerField()
    #llaves foraneas
    proceso = models.ForeignKey(Proceso ,on_delete=models.PROTECT)
    material = models.ForeignKey(Material ,on_delete=models.PROTECT) 

class Flujo (models.Model):
    id= models.AutoField('ID', primary_key=True)
    tiempo_espera = models.IntegerField()
    descripcion_flujo = models.IntegerField()
    #llaves foraneas
 
class proceso_flujo(models.Model):
    id= models.AutoField('ID', primary_key=True)  
    #llaves foraneas
    flujo = models.ForeignKey(Flujo ,on_delete=models.PROTECT)
    proceso = models.ForeignKey(Proceso ,on_delete=models.PROTECT)  

class Herramienta (models.Model):
    id= models.AutoField('ID', primary_key=True)
    nombre_herramienta = models.CharField(max_length=255)
    descripcion_herrmienta =  models.IntegerField()
    imagen_herrmienta =    models.CharField(max_length=255)  

class Uso_herramienta (models.Model):
    id= models.AutoField('ID', primary_key=True)
    #llaves foraneas
    material = models.ForeignKey(Material ,on_delete=models.PROTECT)
    proceso = models.ForeignKey(Proceso ,on_delete=models.PROTECT)  

class Compone_A(models.Model):
    id = models.AutoField('ID', primary_key=True) 
    material = models.ForeignKey(Material)
    descripcion_herrmienta =  models.IntegerField()
    nombre_material1= models.CharField(max_length=255)
    descripcion_material = models.TextField()
    tipo_material = models.CharField(max_length=1)
    marca=  models.CharField(max_length=255)
    modelo= models.CharField(max_length=255)
    imagen_material =models.CharField(max_length=255)
    #llaves foreaneas

class Compuesto_de(models.Model):
    id = models.AutoField('ID', primary_key=True) 
    material = models.OneToOneField(Material)
    nombre_material2= models.CharField(max_length=255)
    descripcion_material = models.TextField()
    tipo_material = models.CharField(max_length=1)
    marca=  models.CharField(max_length=255)
    modelo= models.CharField(max_length=255)
    imagen_material = models.CharField(max_length=255)
    #llaves foreaneas


class Composicion (models.Model):
    #llaves foranea
    id = models.AutoField('ID', primary_key=True) 
    compuesto_de = models.ForeignKey(Compuesto_de)
<<<<<<< HEAD
    compone_a = models.ForeignKey(Compone_A)
=======
<<<<<<< HEAD
    compone_a = models.ForeignKey(Compone_A)
=======
    compone_a = models.ForeignKey(Compone_A)
>>>>>>> 07c89df9e928c447741f1200188af459e583690d
>>>>>>> 39a646f3beef5c149537960c5704d65221be015a
